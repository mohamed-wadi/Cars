<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aymen Car's - Location de Voitures</title>
    <link rel="stylesheet" href="../static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h2>Aymen Car's</h2>
            </div>
            <ul class="nav-menu">
                <li><a href="#home">Accueil</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#catalogue">Catalogue</a></li>
                <li><a href="/about/">√Ä Propos</a></li>
                <li><a href="/faq/">FAQ</a></li>
                <li><a href="/contact/">Contact</a></li>
                <li><button class="btn-login" onclick="checkAuthAndRedirect()">Connexion</button></li>
                <li id="admin-link" style="display: none;"><a href="/dashboard/" style="color: #FF6600; font-weight: 600;">Dashboard Admin</a></li>
            </ul>
        </div>
    </nav>

    <!-- Bloc H√©ro√Øque -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1>Location de Voitures Premium</h1>
            <p>D√©couvrez notre flotte de v√©hicules et profitez d'une exp√©rience de location exceptionnelle</p>
            <button class="btn-primary" onclick="scrollToCatalogue()">R√©server Maintenant</button>
        </div>
        <div class="hero-overlay"></div>
    </section>

    <!-- Formulaire de r√©servation/filtrage -->
    <section class="reservation-filter">
        <div class="container">
            <form id="filter-form" class="filter-form">
                <div class="filter-row">
                    <div class="filter-group">
                        <label for="agency-start">Agence de d√©part</label>
                        <select id="agency-start" name="agency_start" required>
                            <option value="">Chargement...</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="agency-end">Agence de retour</label>
                        <select id="agency-end" name="agency_end" required>
                            <option value="">Chargement...</option>
                        </select>
                    </div>
                </div>
                <div class="filter-row">
                    <div class="filter-group">
                        <label for="date-start">Date de d√©part</label>
                        <input type="date" id="date-start" name="start_date" required>
                    </div>
                    <div class="filter-group">
                        <label for="time-start">Heure</label>
                        <input type="time" id="time-start" name="start_time" required>
                    </div>
                    <div class="filter-group">
                        <label for="date-end">Date de retour</label>
                        <input type="date" id="date-end" name="end_date" required>
                    </div>
                    <div class="filter-group">
                        <label for="time-end">Heure</label>
                        <input type="time" id="time-end" name="end_time" required>
                    </div>
                </div>
                <div class="filter-row">
                    <div class="filter-group">
                        <label for="promo-code">Code promo</label>
                        <input type="text" id="promo-code" name="promo_code" placeholder="(optionnel)">
                    </div>
                    <div class="filter-group">
                        <label for="age">Mon √¢ge</label>
                        <input type="number" id="age" name="driver_age" min="18" max="99" required>
                    </div>
                    <div class="filter-group">
                        <button type="submit" class="btn-primary" style="margin-top: 2rem;">Rechercher</button>
                    </div>
                </div>
            </form>
            
            <!-- Advanced Search Filters -->
            <div class="advanced-filters" style="margin-top: 2rem; padding: 1.5rem; background: #f8f9fa; border-radius: 10px;">
                <h3 style="margin-bottom: 1rem; color: #333;">Filtres Avanc√©s</h3>
                <div class="filter-row">
                    <div class="filter-group">
                        <label for="search-query">Recherche par mot-cl√©</label>
                        <input type="text" id="search-query" placeholder="Marque, mod√®le, description...">
                    </div>
                    <div class="filter-group">
                        <label for="brand-filter">Marque</label>
                        <select id="brand-filter">
                            <option value="">Toutes les marques</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="fuel-filter">Carburant</label>
                        <select id="fuel-filter">
                            <option value="">Tous types</option>
                            <option value="essence">Essence</option>
                            <option value="diesel">Diesel</option>
                            <option value="hybrid">Hybride</option>
                            <option value="electric">√âlectrique</option>
                        </select>
                    </div>
                </div>
                <div class="filter-row">
                    <div class="filter-group">
                        <label for="transmission-filter">Transmission</label>
                        <select id="transmission-filter">
                            <option value="">Toutes</option>
                            <option value="manual">Manuelle</option>
                            <option value="automatic">Automatique</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="min-price">Prix minimum (‚Ç¨/jour)</label>
                        <input type="number" id="min-price" min="0" placeholder="0">
                    </div>
                    <div class="filter-group">
                        <label for="max-price">Prix maximum (‚Ç¨/jour)</label>
                        <input type="number" id="max-price" min="0" placeholder="1000">
                    </div>
                </div>
                <div class="filter-row">
                    <div class="filter-group">
                        <label for="seats-filter">Nombre de places</label>
                        <select id="seats-filter">
                            <option value="">Toutes</option>
                            <option value="2">2 places</option>
                            <option value="4">4 places</option>
                            <option value="5">5 places</option>
                            <option value="7">7 places</option>
                            <option value="9">9 places</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="sort-by">Trier par</label>
                        <select id="sort-by">
                            <option value="price_asc">Prix croissant</option>
                            <option value="price_desc">Prix d√©croissant</option>
                            <option value="brand">Marque</option>
                            <option value="year_desc">Ann√©e (r√©cent)</option>
                            <option value="rating">Note client</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <button type="button" class="btn-primary" onclick="applyAdvancedFilters()" style="margin-top: 2rem;">Appliquer les filtres</button>
                        <button type="button" class="btn" onclick="clearFilters()" style="margin-top: 2rem; background: #6c757d; color: white;">Effacer</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Bloc Services -->
    <section id="services" class="services">
        <div class="container">
            <h2 class="section-title">Nos Services</h2>
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-icon">üöó</div>
                    <h3>Flexibilit√© Totale</h3>
                    <p>Location √† la journ√©e, semaine ou mois selon vos besoins</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">üõ°Ô∏è</div>
                    <h3>Assurance Compl√®te</h3>
                    <p>Protection maximale incluse dans tous nos forfaits</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">üè†</div>
                    <h3>Livraison √† Domicile</h3>
                    <p>Nous livrons votre v√©hicule directement chez vous</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Bloc Catalogue -->
    <section id="catalogue" class="catalogue">
        <div class="container">
            <h2 class="section-title">Notre Catalogue</h2>
            <div class="catalogue-grid" id="cars-container">
                <!-- Les voitures seront charg√©es dynamiquement via JavaScript -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>üöó Location de Voitures</h3>
                    <p>Votre partenaire de confiance pour la location de voitures</p>
                </div>
                <div class="footer-section">
                    <h4>Contact</h4>
                    <p>üìß support@location-voitures.com</p>
                    <p>üìû +33 1 23 45 67 89</p>
                </div>
                <div class="footer-section">
                    <h4>Liens Utiles</h4>
                    <p><a href="/terms/" style="color: #666; text-decoration: none;">Conditions G√©n√©rales</a></p>
                    <p><a href="/faq/" style="color: #666; text-decoration: none;">FAQ</a></p>
                    <p><a href="/about/" style="color: #666; text-decoration: none;">√Ä Propos</a></p>
                </div>
            </div>
        </div>
    </footer>

    <script src="../static/js/main.js"></script>
    <script>
        // V√©rifier l'authentification et rediriger
        function checkAuthAndRedirect() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            
            if (isLoggedIn === 'true' && user.id) {
                if (user.is_staff) {
                    // Si c'est un admin, afficher le lien vers le dashboard
                    document.getElementById('admin-link').style.display = 'inline-block';
                    const loginBtn = document.querySelector('.btn-login');
                    loginBtn.textContent = `Bonjour ${user.first_name || user.username}`;
                    loginBtn.onclick = () => window.location.href = '/profile/';
                } else {
                    // Si c'est un utilisateur normal, aller au profil
                    window.location.href = '/profile/';
                }
            } else {
                // Si pas connect√©, aller √† la page de connexion
                window.location.href = '/login/';
            }
        }
        
        // V√©rifier l'authentification au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            
            if (isLoggedIn === 'true' && user.id) {
                const loginBtn = document.querySelector('.btn-login');
                loginBtn.textContent = `Bonjour ${user.first_name || user.username}`;
                loginBtn.onclick = () => window.location.href = '/profile/';
                
                if (user.is_staff) {
                    document.getElementById('admin-link').style.display = 'inline-block';
                }
            }
        });
    </script>
</body>
</html> 